{"version":3,"file":"next-color-mode.module.js","sources":["../src/ColorModeScript.tsx","../src/ColorModeStyles.tsx","../src/useColorModeValue.tsx","../src/useColorSwitcher.tsx"],"sourcesContent":["import React from 'react'\n\nexport const initColorModeScript = `\nconst selectedColorMode = localStorage.getItem(\"nextColorMode\");\n\nif (!selectedColorMode) {\n  setupPreferredColorMode();\n  window.colorMode = window.prefersDarkMode ? \"dark\" : \"light\";\n} else {\n  window.colorMode = selectedColorMode;\n}\n\nappendThemeClassName(window.colorMode)\n\nfunction setupPreferredColorMode() {\n  const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  window.prefersDarkMode = darkModeMediaQuery.matches\n}\n\nfunction appendThemeClassName(colorMode) {\n  window.document.querySelector('body').classList.remove(\"next-light-theme\");\n  window.document.querySelector('body').classList.remove(\"next-dark-theme\");\n  window.document.querySelector('body').classList.add(\"next-\" + colorMode + \"-theme\")\n}\n`\n\nexport function ColorModeScript() {\n  return <script dangerouslySetInnerHTML={{ __html: initColorModeScript }} />\n}\n","import React from 'react'\nimport Head from 'next/head'\n\ninterface ColorModeStylesProps {\n  styles: ColoredValue[]\n}\n\ntype ColoredValue = { light: string; dark: string }\n\nexport function ColorModeStyles({ styles }: ColorModeStylesProps) {\n  return (\n    <Head>\n      <style>{transformColorModeStyles(...styles)}</style>\n    </Head>\n  )\n}\n\nfunction transformColorModeStyles(...styles: ColoredValue[]) {\n  const lightStyles = styles.map((entry) => entry.light)\n  const darkStyles = styles.map((entry) => entry.dark)\n  return ['.next-light-theme {', lightStyles.join(''), '}', '.next-dark-theme {', darkStyles.join(''), '}']\n}\n","export function useColorModeValue(\n  name: string,\n  lightThemeValue: string,\n  darkThemeValue: string,\n): [string, { light: string; dark: string }] {\n  return [`var(--${name})`, { light: `--${name}: ${lightThemeValue};`, dark: `--${name}: ${darkThemeValue};` }]\n}\n","import { useState, useCallback } from 'react'\n\nexport function useColorSwitcher() {\n  const [isLightMode, { toggle }] = useBoolean(() => {\n    const colorMode = localStorage.getItem('nextColorMode')\n    if (!colorMode) {\n      return window.prefersDarkMode ? false : true\n    }\n    return colorMode === 'light'\n  })\n\n  function changeTheme(colorMode: 'light' | 'dark') {\n    toggle()\n    localStorage.setItem('nextColorMode', colorMode)\n    const bodyElement = window.document.querySelector('body')\n    bodyElement?.classList.remove('next-light-theme')\n    bodyElement?.classList.remove('next-dark-theme')\n    bodyElement?.classList.add('next-' + colorMode + '-theme')\n  }\n\n  function toggleTheme() {\n    return changeTheme(isLightMode ? 'dark' : 'light')\n  }\n\n  return { colorMode: isLightMode ? 'light' : 'dark', changeTheme, toggleTheme }\n}\n\nfunction useBoolean(initialState: boolean | (() => boolean) = false) {\n  const [value, setValue] = useState(initialState)\n\n  const on = useCallback(() => {\n    setValue(true)\n  }, [])\n\n  const off = useCallback(() => {\n    setValue(false)\n  }, [])\n\n  const toggle = useCallback(() => {\n    setValue((prev: boolean) => !prev)\n  }, [])\n\n  return [value, { on, off, toggle }] as const\n}\n"],"names":["initColorModeScript","ColorModeScript","React","dangerouslySetInnerHTML","__html","ColorModeStyles","Head","transformColorModeStyles","styles","lightStyles","map","entry","light","darkStyles","dark","join","useColorModeValue","name","lightThemeValue","darkThemeValue","useColorSwitcher","initialState","useState","setValue","on","useCallback","off","toggle","prev","useBoolean","colorMode","localStorage","getItem","window","prefersDarkMode","isLightMode","changeTheme","setItem","bodyElement","document","querySelector","classList","remove","add","toggleTheme"],"mappings":"8EAEaA,IAAAA,8wBAwBGC,IACd,OAAOC,0BAAQC,wBAAyB,CAAEC,OAAQJ,cClBpCK,KACd,OACEH,gBAACI,OACCJ,6BAAQK,iBAHoBC,UAQlC,SAASD,QAA4BC,2BAC7BC,EAAcD,EAAOE,IAAI,SAACC,UAAUA,EAAMC,QAC1CC,EAAaL,EAAOE,IAAI,SAACC,UAAUA,EAAMG,OAC/C,MAAO,CAAC,sBAAuBL,EAAYM,KAAK,IAAK,IAAK,qBAAsBF,EAAWE,KAAK,IAAK,cCpBvFC,EACdC,EACAC,EACAC,GAEA,MAAO,UAAUF,MAAS,CAAEL,WAAYK,OAASC,MAAoBJ,UAAWG,OAASE,iBCH3EC,IACd,MAwBF,SAAoBC,YAAAA,IAAAA,GAA0C,GAC5D,MAA0BC,EAASD,GAArBE,OAcd,MAAO,MAAQ,CAAEC,GAZNC,EAAY,WACrBF,GAAS,IACR,IAUkBG,IARTD,EAAY,WACtBF,GAAS,IACR,IAMuBI,OAJXF,EAAY,WACzBF,EAAS,SAACK,UAAmBA,KAC5B,MArC+BC,CAAW,WAC3C,IAAMC,EAAYC,aAAaC,QAAQ,iBACvC,OAAKF,EAGgB,UAAdA,GAFEG,OAAOC,kBAHXC,OAAeR,OAAAA,OAQtB,SAASS,EAAYN,GACnBH,IACAI,aAAaM,QAAQ,gBAAiBP,GACtC,IAAMQ,EAAcL,OAAOM,SAASC,cAAc,cAClDF,GAAAA,EAAaG,UAAUC,OAAO,0BAC9BJ,GAAAA,EAAaG,UAAUC,OAAO,yBAC9BJ,GAAAA,EAAaG,UAAUE,IAAI,QAAUb,EAAY,UAOnD,MAAO,CAAEA,UAAWK,EAAc,QAAU,OAAQC,YAAAA,EAAaQ,YAJjE,WACE,OAAOR,EAAYD,EAAc,OAAS"}