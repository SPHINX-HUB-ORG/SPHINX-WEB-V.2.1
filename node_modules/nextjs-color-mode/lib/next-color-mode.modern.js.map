{"version":3,"file":"next-color-mode.modern.js","sources":["../src/ColorModeScript.tsx","../src/ColorModeStyles.tsx","../src/useColorModeValue.tsx","../src/useColorSwitcher.tsx"],"sourcesContent":["import React from 'react'\n\nexport const initColorModeScript = `\nconst selectedColorMode = localStorage.getItem(\"nextColorMode\");\n\nif (!selectedColorMode) {\n  setupPreferredColorMode();\n  window.colorMode = window.prefersDarkMode ? \"dark\" : \"light\";\n} else {\n  window.colorMode = selectedColorMode;\n}\n\nappendThemeClassName(window.colorMode)\n\nfunction setupPreferredColorMode() {\n  const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  window.prefersDarkMode = darkModeMediaQuery.matches\n}\n\nfunction appendThemeClassName(colorMode) {\n  window.document.querySelector('body').classList.remove(\"next-light-theme\");\n  window.document.querySelector('body').classList.remove(\"next-dark-theme\");\n  window.document.querySelector('body').classList.add(\"next-\" + colorMode + \"-theme\")\n}\n`\n\nexport function ColorModeScript() {\n  return <script dangerouslySetInnerHTML={{ __html: initColorModeScript }} />\n}\n","import React from 'react'\nimport Head from 'next/head'\n\ninterface ColorModeStylesProps {\n  styles: ColoredValue[]\n}\n\ntype ColoredValue = { light: string; dark: string }\n\nexport function ColorModeStyles({ styles }: ColorModeStylesProps) {\n  return (\n    <Head>\n      <style>{transformColorModeStyles(...styles)}</style>\n    </Head>\n  )\n}\n\nfunction transformColorModeStyles(...styles: ColoredValue[]) {\n  const lightStyles = styles.map((entry) => entry.light)\n  const darkStyles = styles.map((entry) => entry.dark)\n  return ['.next-light-theme {', lightStyles.join(''), '}', '.next-dark-theme {', darkStyles.join(''), '}']\n}\n","export function useColorModeValue(\n  name: string,\n  lightThemeValue: string,\n  darkThemeValue: string,\n): [string, { light: string; dark: string }] {\n  return [`var(--${name})`, { light: `--${name}: ${lightThemeValue};`, dark: `--${name}: ${darkThemeValue};` }]\n}\n","import { useState, useCallback } from 'react'\n\nexport function useColorSwitcher() {\n  const [isLightMode, { toggle }] = useBoolean(() => {\n    const colorMode = localStorage.getItem('nextColorMode')\n    if (!colorMode) {\n      return window.prefersDarkMode ? false : true\n    }\n    return colorMode === 'light'\n  })\n\n  function changeTheme(colorMode: 'light' | 'dark') {\n    toggle()\n    localStorage.setItem('nextColorMode', colorMode)\n    const bodyElement = window.document.querySelector('body')\n    bodyElement?.classList.remove('next-light-theme')\n    bodyElement?.classList.remove('next-dark-theme')\n    bodyElement?.classList.add('next-' + colorMode + '-theme')\n  }\n\n  function toggleTheme() {\n    return changeTheme(isLightMode ? 'dark' : 'light')\n  }\n\n  return { colorMode: isLightMode ? 'light' : 'dark', changeTheme, toggleTheme }\n}\n\nfunction useBoolean(initialState: boolean | (() => boolean) = false) {\n  const [value, setValue] = useState(initialState)\n\n  const on = useCallback(() => {\n    setValue(true)\n  }, [])\n\n  const off = useCallback(() => {\n    setValue(false)\n  }, [])\n\n  const toggle = useCallback(() => {\n    setValue((prev: boolean) => !prev)\n  }, [])\n\n  return [value, { on, off, toggle }] as const\n}\n"],"names":["initColorModeScript","ColorModeScript","React","dangerouslySetInnerHTML","__html","ColorModeStyles","styles","Head","lightStyles","map","entry","light","darkStyles","dark","join","transformColorModeStyles","useColorModeValue","name","lightThemeValue","darkThemeValue","useColorSwitcher","isLightMode","toggle","initialState","value","setValue","useState","on","useCallback","off","prev","useBoolean","colorMode","localStorage","getItem","window","prefersDarkMode","changeTheme","setItem","bodyElement","document","querySelector","classList","remove","add","toggleTheme"],"mappings":"8EAEaA,MAAAA,8wBAwBGC,IACd,OAAOC,0BAAQC,wBAAyB,CAAEC,OAAQJ,cClBpCK,GAAgBC,OAAEA,IAChC,OACEJ,gBAACK,OACCL,6BAKN,YAAqCI,GACnC,MAAME,EAAcF,EAAOG,IAAKC,GAAUA,EAAMC,OAC1CC,EAAaN,EAAOG,IAAKC,GAAUA,EAAMG,MAC/C,MAAO,CAAC,sBAAuBL,EAAYM,KAAK,IAAK,IAAK,qBAAsBF,EAAWE,KAAK,IAAK,KARzFC,IAA4BT,cCZ1BU,EACdC,EACAC,EACAC,GAEA,MAAO,UAAUF,KAAS,CAAEN,WAAYM,MAASC,KAAoBL,UAAWI,MAASE,gBCH3EC,IACd,MAAOC,GAAaC,OAAEA,IAwBxB,SAAoBC,GAA0C,GAC5D,MAAOC,EAAOC,GAAYC,EAASH,GAcnC,MAAO,CAACC,EAAO,CAAEG,GAZNC,EAAY,KACrBH,GAAS,IACR,IAUkBI,IARTD,EAAY,KACtBH,GAAS,IACR,IAMuBH,OAJXM,EAAY,KACzBH,EAAUK,IAAmBA,IAC5B,MArC+BC,CAAW,KAC3C,MAAMC,EAAYC,aAAaC,QAAQ,iBACvC,OAAKF,EAGgB,UAAdA,GAFEG,OAAOC,kBAKlB,SAASC,EAAYL,GACnBV,IACAW,aAAaK,QAAQ,gBAAiBN,GACtC,MAAMO,EAAcJ,OAAOK,SAASC,cAAc,cAClDF,GAAAA,EAAaG,UAAUC,OAAO,0BAC9BJ,GAAAA,EAAaG,UAAUC,OAAO,yBAC9BJ,GAAAA,EAAaG,UAAUE,IAAI,QAAUZ,EAAY,UAOnD,MAAO,CAAEA,UAAWX,EAAc,QAAU,OAAQgB,YAAAA,EAAaQ,YAJjE,WACE,OAAOR,EAAYhB,EAAc,OAAS"}