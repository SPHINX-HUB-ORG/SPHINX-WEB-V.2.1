{"version":3,"file":"tabbable.dev.js","sources":["../../src/index.ts"],"sourcesContent":["// Credit:\n// https://github.com/davidtheclark/tabbable\nconst candidateSelector =\n  'input,select,textarea,a[href],button,[tabindex],' +\n  'audio[controls],video[controls],' +\n  '[contenteditable]:not([contenteditable=\"false\"])'\n\nexport interface Tabbables {\n  documentOrder: number\n  tabIndex: number\n  node: HTMLElement | HTMLInputElement\n}\n\nconst matches: Element['matches'] =\n  typeof Element === 'undefined'\n    ? () => false\n    : Element.prototype.matches ||\n      // @ts-ignore\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector\n\nconst tabbable = (el: HTMLElement, includeRootNode = false): HTMLElement[] => {\n  const regularTabbables: HTMLElement[] = []\n  const orderedTabbables: Tabbables[] = []\n\n  let candidates: HTMLElement[] | NodeListOf<HTMLElement> = el.querySelectorAll(\n    candidateSelector\n  )\n\n  if (includeRootNode && matches.call(el, candidateSelector)) {\n    candidates = Array.prototype.slice.apply(candidates) as HTMLElement[]\n    candidates.unshift(el)\n  }\n\n  let i, candidate, candidateTabindex\n  for (i = 0; i < candidates.length; i++) {\n    candidate = candidates[i]\n    if (!isNodeMatchingSelectorTabbable(candidate)) continue\n    candidateTabindex = getTabindex(candidate)\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate)\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      })\n    }\n  }\n\n  return orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables)\n}\n\nconst isNodeMatchingSelectorTabbable = (node: HTMLElement) =>\n  !(\n    !isNodeMatchingSelectorFocusable(node) ||\n    (node.tagName === 'INPUT' &&\n      (node as HTMLInputElement).type === 'radio' &&\n      !isTabbableRadio(node as HTMLInputElement)) ||\n    getTabindex(node) < 0\n  )\n\nconst isNodeMatchingSelectorFocusable = (node: HTMLElement) =>\n  !(\n    (node as HTMLInputElement).disabled ||\n    (isInput(node) && (node as HTMLInputElement).type === 'hidden') ||\n    // offsetParent being null will allow detecting cases where an element\n    // is invisible or inside an invisible element,  as long as the element\n    // does not use position: fixed. For them, their visibility has to be\n    // checked directly as well.\n    node.offsetParent === null ||\n    getComputedStyle(node).visibility === 'hidden'\n  )\n\nconst getTabindex = (node: HTMLElement) => {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex') || '', 10)\n  if (!isNaN(tabindexAttr)) return tabindexAttr\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (node.contentEditable === 'true') return 0\n  return node.tabIndex\n}\n\n// @ts-ignore\nconst sortOrderedTabbables = (a: Tabbables, b: Tabbables) =>\n  a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex\n\nconst isInput = (node: HTMLElement) => node.tagName === 'INPUT'\n\nconst isTabbableRadio = (node: HTMLInputElement) => {\n  if (!node.name) return true\n  // This won't account for the edge case where you have radio groups with the\n  // same in separate forms on the same page.\n  if (node.ownerDocument) {\n    const radioSet = node.ownerDocument.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + node.name + '\"]'\n    )\n\n    for (let i = 0; i < radioSet.length; i++)\n      if ((radioSet[i] as HTMLInputElement).checked) return radioSet[i] === node\n\n    return true\n  }\n\n  return false\n}\n\nexport default tabbable\n"],"names":["candidateSelector","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","a","node","tabbable","el","includeRootNode","regularTabbables","orderedTabbables","candidates","querySelectorAll","call","Array","slice","apply","unshift","i","candidate","candidateTabindex","length","isNodeMatchingSelectorTabbable","getTabindex","push","documentOrder","tabIndex","sort","sortOrderedTabbables","map","concat","isNodeMatchingSelectorFocusable","tagName","type","isTabbableRadio","disabled","isInput","offsetParent","getComputedStyle","visibility","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","b","name","ownerDocument","radioSet","checked"],"mappings":"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"}