{"version":3,"file":"index.dev.mjs","sources":["../../src/index.ts"],"sourcesContent":["// Credit:\n// https://github.com/davidtheclark/tabbable\nconst candidateSelector =\n  'input,select,textarea,a[href],button,[tabindex],' +\n  'audio[controls],video[controls],' +\n  '[contenteditable]:not([contenteditable=\"false\"])'\n\nexport interface Tabbables {\n  documentOrder: number\n  tabIndex: number\n  node: HTMLElement | HTMLInputElement\n}\n\nconst matches: Element['matches'] =\n  typeof Element === 'undefined'\n    ? () => false\n    : Element.prototype.matches ||\n      // @ts-ignore\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector\n\nconst tabbable = (el: HTMLElement, includeRootNode = false): HTMLElement[] => {\n  const regularTabbables: HTMLElement[] = []\n  const orderedTabbables: Tabbables[] = []\n\n  let candidates: HTMLElement[] | NodeListOf<HTMLElement> = el.querySelectorAll(\n    candidateSelector\n  )\n\n  if (includeRootNode && matches.call(el, candidateSelector)) {\n    candidates = Array.prototype.slice.apply(candidates) as HTMLElement[]\n    candidates.unshift(el)\n  }\n\n  let i, candidate, candidateTabindex\n  for (i = 0; i < candidates.length; i++) {\n    candidate = candidates[i]\n    if (!isNodeMatchingSelectorTabbable(candidate)) continue\n    candidateTabindex = getTabindex(candidate)\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate)\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      })\n    }\n  }\n\n  return orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables)\n}\n\nconst isNodeMatchingSelectorTabbable = (node: HTMLElement) =>\n  !(\n    !isNodeMatchingSelectorFocusable(node) ||\n    (node.tagName === 'INPUT' &&\n      (node as HTMLInputElement).type === 'radio' &&\n      !isTabbableRadio(node as HTMLInputElement)) ||\n    getTabindex(node) < 0\n  )\n\nconst isNodeMatchingSelectorFocusable = (node: HTMLElement) =>\n  !(\n    (node as HTMLInputElement).disabled ||\n    (isInput(node) && (node as HTMLInputElement).type === 'hidden') ||\n    // offsetParent being null will allow detecting cases where an element\n    // is invisible or inside an invisible element,  as long as the element\n    // does not use position: fixed. For them, their visibility has to be\n    // checked directly as well.\n    node.offsetParent === null ||\n    getComputedStyle(node).visibility === 'hidden'\n  )\n\nconst getTabindex = (node: HTMLElement) => {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex') || '', 10)\n  if (!isNaN(tabindexAttr)) return tabindexAttr\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (node.contentEditable === 'true') return 0\n  return node.tabIndex\n}\n\n// @ts-ignore\nconst sortOrderedTabbables = (a: Tabbables, b: Tabbables) =>\n  a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex\n\nconst isInput = (node: HTMLElement) => node.tagName === 'INPUT'\n\nconst isTabbableRadio = (node: HTMLInputElement) => {\n  if (!node.name) return true\n  // This won't account for the edge case where you have radio groups with the\n  // same in separate forms on the same page.\n  if (node.ownerDocument) {\n    const radioSet = node.ownerDocument.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + node.name + '\"]'\n    )\n\n    for (let i = 0; i < radioSet.length; i++)\n      if ((radioSet[i] as HTMLInputElement).checked) return radioSet[i] === node\n\n    return true\n  }\n\n  return false\n}\n\nexport default tabbable\n"],"names":["candidateSelector","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","a","node","tabbable","el","includeRootNode","regularTabbables","orderedTabbables","candidates","querySelectorAll","call","Array","slice","apply","unshift","i","candidate","candidateTabindex","length","isNodeMatchingSelectorTabbable","getTabindex","push","documentOrder","tabIndex","sort","sortOrderedTabbables","map","concat","isNodeMatchingSelectorFocusable","tagName","type","isTabbableRadio","disabled","isInput","offsetParent","getComputedStyle","visibility","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","b","name","ownerDocument","radioSet","checked"],"mappings":"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"}