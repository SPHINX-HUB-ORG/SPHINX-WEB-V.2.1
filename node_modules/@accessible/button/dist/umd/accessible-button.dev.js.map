{"version":3,"file":"accessible-button.dev.js","sources":["../../node_modules/@react-hook/passive-layout-effect/src/index.tsx","../../node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/event/src/index.tsx","../../node_modules/@accessible/use-key/src/index.tsx","../../node_modules/@react-hook/merged-ref/src/index.tsx","../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\n\nconst usePassiveLayoutEffect =\n  React[\n    typeof document !== 'undefined' && document.createElement !== void 0\n      ? 'useLayoutEffect'\n      : 'useEffect'\n  ]\n\nexport default usePassiveLayoutEffect\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(target: any, type: any, listener: any, cleanup: any): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    let didUnsubscribe = 0\n    function listener(this: any, ...args: any[]) {\n      if (didUnsubscribe) return\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      didUnsubscribe = 1\n      targetEl.removeEventListener(type, listener)\n      cleanup && cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import * as React from 'react'\nimport useEvent from '@react-hook/event'\n\nexport function useKey<T extends Window>(\n  target: T | null,\n  listeners: Record<string, (event: KeyboardEvent) => any>\n): void\nexport function useKey<T extends Document>(\n  target: T | null,\n  listeners: Record<string, (event: KeyboardEvent) => any>\n): void\nexport function useKey<T extends HTMLElement>(\n  target: React.RefObject<T> | T | null,\n  listeners: Record<string, (event: KeyboardEvent) => any>\n): void\nexport function useKey(\n  target: any,\n  listeners: Record<string, (event: KeyboardEvent) => any>\n) {\n  useEvent(target, 'keydown', (event): void => {\n    const listener = listeners[LEGACY_COMPAT[event.key] || event.key]\n    if (listener) listener(event)\n  })\n}\n\n// IE 11 and some versions of Edge have non-standard value\nconst LEGACY_COMPAT: Record<string, string> = {\n  Up: 'ArrowUp',\n  Right: 'ArrowRight',\n  Down: 'ArrowDown',\n  Left: 'ArrowLeft',\n  Esc: 'Escape',\n  Spacebar: ' ',\n  Del: 'Delete',\n  Crsel: 'CrSel',\n  Exsel: 'ExSel',\n  Add: '+',\n  Subtract: '-',\n  Multiply: '*',\n  Divide: '/',\n  Decimal: '.',\n  Scroll: 'ScrollLock',\n}\n\nexport default useKey\n","import * as React from 'react'\n\nconst useMergedRef = <T extends any>(\n  ...refs: React.Ref<T>[]\n): React.RefCallback<T> => (element: T) =>\n  refs.forEach((ref) => {\n    if (typeof ref === 'function') ref(element)\n    else if (ref && typeof ref === 'object')\n      (ref as React.MutableRefObject<T>).current = element\n  })\n\nexport default useMergedRef\n","import * as React from 'react'\nimport useKey from '@accessible/use-key'\nimport useEvent from '@react-hook/event'\nimport useMergedRef from '@react-hook/merged-ref'\n\nexport function useA11yButton<T extends HTMLElement>(\n  target: React.RefObject<T> | T | null,\n  onClick: (event: MouseEvent) => any\n) {\n  const clickedMouse = React.useRef(false)\n  const setClickedMouse = () => (clickedMouse.current = true)\n  useEvent(target, 'touchstart', setClickedMouse)\n  useEvent(target, 'mousedown', setClickedMouse)\n  useEvent(target, 'click', (event) => {\n    // Only fire onClick if the keyboard was not used to initiate the click\n    clickedMouse.current && onClick(event)\n    clickedMouse.current = false\n  })\n  // @ts-expect-error\n  useKey(target, {\n    Enter: onClick,\n    ' ': onClick,\n  })\n\n  return {\n    role: 'button',\n    tabIndex: 0,\n  } as const\n}\n\nexport const Button = ({children}: ButtonProps) => {\n  const ref = React.useRef(null)\n  const {props} = children\n  const {role, tabIndex} = useA11yButton(ref, props.onClick)\n\n  return React.cloneElement(children, {\n    onClick: undefined,\n    role: props.hasOwnProperty('role') ? props.role : role,\n    tabIndex: props.hasOwnProperty('tabIndex') ? props.tabIndex : tabIndex,\n    // @ts-expect-error\n    ref: useMergedRef(ref, children.ref),\n  })\n}\n\nexport interface ButtonProps {\n  children: JSX.Element | React.ReactElement\n}\n\n/* istanbul ignore next */\nif (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') {\n  Button.displayName = 'AccessibleButton'\n}\n"],"names":["usePassiveLayoutEffect","React","document","createElement","useLatest","current","storedValue","useEvent","target","type","listener","cleanup","storedListener","storedCleanup","useLayoutEffect","targetEl","didUnsubscribe","args","apply","addEventListener","removeEventListener","useKey","listeners","event","LEGACY_COMPAT","key","Up","Right","Down","Left","Esc","Spacebar","Del","Crsel","Exsel","Add","Subtract","Multiply","Divide","Decimal","Scroll","useMergedRef","refs","element","forEach","ref","useA11yButton","onClick","clickedMouse","setClickedMouse","Enter","role","tabIndex","Button","children","props","undefined","hasOwnProperty","process","displayName"],"mappings":"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"}