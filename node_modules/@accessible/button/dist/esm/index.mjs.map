{"version":3,"file":"index.mjs","sources":["../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport useKey from '@accessible/use-key'\nimport useEvent from '@react-hook/event'\nimport useMergedRef from '@react-hook/merged-ref'\n\nexport function useA11yButton<T extends HTMLElement>(\n  target: React.RefObject<T> | T | null,\n  onClick: (event: MouseEvent) => any\n) {\n  const clickedMouse = React.useRef(false)\n  const setClickedMouse = () => (clickedMouse.current = true)\n  useEvent(target, 'touchstart', setClickedMouse)\n  useEvent(target, 'mousedown', setClickedMouse)\n  useEvent(target, 'click', (event) => {\n    // Only fire onClick if the keyboard was not used to initiate the click\n    clickedMouse.current && onClick(event)\n    clickedMouse.current = false\n  })\n  // @ts-expect-error\n  useKey(target, {\n    Enter: onClick,\n    ' ': onClick,\n  })\n\n  return {\n    role: 'button',\n    tabIndex: 0,\n  } as const\n}\n\nexport const Button = ({children}: ButtonProps) => {\n  const ref = React.useRef(null)\n  const {props} = children\n  const {role, tabIndex} = useA11yButton(ref, props.onClick)\n\n  return React.cloneElement(children, {\n    onClick: undefined,\n    role: props.hasOwnProperty('role') ? props.role : role,\n    tabIndex: props.hasOwnProperty('tabIndex') ? props.tabIndex : tabIndex,\n    // @ts-expect-error\n    ref: useMergedRef(ref, children.ref),\n  })\n}\n\nexport interface ButtonProps {\n  children: JSX.Element | React.ReactElement\n}\n\n/* istanbul ignore next */\nif (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') {\n  Button.displayName = 'AccessibleButton'\n}\n"],"names":["useA11yButton","target","onClick","clickedMouse","React","setClickedMouse","current","useEvent","event","useKey","Enter","role","tabIndex","Button","children","ref","props","undefined","hasOwnProperty","useMergedRef"],"mappings":"AAKO,SAASA,EACdC,EACAC,OAEMC,EAAeC,EAAa,GAC5BC,EAAkB,IAAOF,EAAaG,QAAU,SACtDC,EAASN,EAAQ,aAAcI,GAC/BE,EAASN,EAAQ,YAAaI,GAC9BE,EAASN,EAAQ,QAAUO,IAEzBL,EAAaG,SAAWJ,EAAQM,GAChCL,EAAaG,QAAU,IAGzBG,EAAOR,EAAQ,CACbS,MAAOR,MACFA,IAGA,CACLS,KAAM,SACNC,SAAU,kKAIDC,UAAUC,SAACA,KAChBC,EAAMX,EAAa,OACnBY,MAACA,GAASF,GACVH,KAACA,EAADC,SAAOA,GAAYZ,EAAce,EAAKC,EAAMd,gBAE3CE,EAAmBU,EAAU,CAClCZ,aAASe,EACTN,KAAMK,EAAME,eAAe,QAAUF,EAAML,KAAOA,EAClDC,SAAUI,EAAME,eAAe,YAAcF,EAAMJ,SAAWA,EAE9DG,IAAKI,EAAaJ,EAAKD,EAASC"}