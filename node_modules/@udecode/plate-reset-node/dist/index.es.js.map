{"version":3,"file":"index.es.js","sources":["../../../../node_modules/is-hotkey/lib/index.js","../src/onKeyDownResetNode.ts","../src/createResetNodePlugin.ts"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\n// We make this a function so it can be tested in describe block mocks with Jest.\nvar IS_MAC = () => typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\n// We make this a function so it can be tested in describe block mocks with Jest.\nvar ALIASES = () => ({\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC() ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n});\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES()[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","import {\n  isCollapsed,\n  KeyboardHandlerReturnType,\n  PlateEditor,\n  setElements,\n  someNode,\n  Value,\n  WithPlatePlugin,\n} from '@udecode/plate-common';\nimport isHotkey from 'is-hotkey';\nimport { ResetNodePlugin } from './types';\n\nexport const SIMULATE_BACKSPACE: any = {\n  key: '',\n  which: 8,\n};\n\nexport const onKeyDownResetNode = <\n  V extends Value = Value,\n  E extends PlateEditor<V> = PlateEditor<V>\n>(\n  editor: E,\n  { options: { rules } }: WithPlatePlugin<ResetNodePlugin, V, E>\n): KeyboardHandlerReturnType => (event) => {\n  if (event.defaultPrevented) return;\n\n  let reset;\n\n  if (!editor.selection) return;\n\n  if (isCollapsed(editor.selection)) {\n    rules!.forEach(({ types, defaultType, hotkey, predicate, onReset }) => {\n      if (hotkey && isHotkey(hotkey, event as any)) {\n        if (\n          predicate(editor as any) &&\n          someNode(editor, { match: { type: types } })\n        ) {\n          event.preventDefault?.();\n\n          setElements(editor, { type: defaultType });\n\n          if (onReset) {\n            onReset(editor as any);\n          }\n\n          reset = true;\n        }\n      }\n    });\n  }\n\n  return reset;\n};\n","import {\n  createPluginFactory,\n  getEndPoint,\n  getNode,\n  getNodeProps,\n  getStartPoint,\n  isCollapsed,\n  resetEditorChildren,\n  setNodes,\n  TElement,\n  unsetNodes,\n  withoutNormalizing,\n} from '@udecode/plate-common';\nimport { Point } from 'slate';\nimport { onKeyDownResetNode } from './onKeyDownResetNode';\nimport { ResetNodePlugin } from './types';\n\nexport const KEY_RESET_NODE = 'resetNode';\n\n/**\n * Enables support for resetting block type from rules.\n */\nexport const createResetNodePlugin = createPluginFactory<ResetNodePlugin>({\n  key: KEY_RESET_NODE,\n  handlers: {\n    onKeyDown: onKeyDownResetNode,\n  },\n  withOverrides: (editor, { options }) => {\n    const { deleteFragment, deleteBackward } = editor;\n\n    if (!options.disableEditorReset) {\n      const deleteFragmentPlugin = () => {\n        const { selection } = editor;\n        if (!selection) return;\n\n        const start = getStartPoint(editor, []);\n        const end = getEndPoint(editor, []);\n\n        if (\n          (Point.equals(selection.anchor, start) &&\n            Point.equals(selection.focus, end)) ||\n          (Point.equals(selection.focus, start) &&\n            Point.equals(selection.anchor, end))\n        ) {\n          resetEditorChildren(editor, {\n            insertOptions: { select: true },\n          });\n          return true;\n        }\n      };\n\n      editor.deleteFragment = (direction) => {\n        if (deleteFragmentPlugin()) return;\n\n        deleteFragment(direction);\n      };\n    }\n\n    if (!options.disableFirstBlockReset) {\n      editor.deleteBackward = (unit) => {\n        const { selection } = editor;\n        if (selection && isCollapsed(selection)) {\n          const start = getStartPoint(editor, []);\n\n          if (Point.equals(selection.anchor, start)) {\n            const node = getNode<TElement>(editor, [0])!;\n\n            const { children, ...props } = editor.blockFactory({}, [0]);\n\n            // replace props\n            withoutNormalizing(editor, () => {\n              unsetNodes(editor, Object.keys(getNodeProps(node)), { at: [0] });\n              setNodes(editor, props, { at: [0] });\n            });\n            return;\n          }\n        }\n\n        deleteBackward(unit);\n      };\n    }\n\n    return editor;\n  },\n  options: {\n    rules: [],\n  },\n});\n"],"names":["SIMULATE_BACKSPACE","key","which","onKeyDownResetNode","editor","options","rules","event","defaultPrevented","reset","selection","isCollapsed","forEach","types","defaultType","hotkey","predicate","onReset","isHotkey","someNode","match","type","preventDefault","setElements","KEY_RESET_NODE","createResetNodePlugin","createPluginFactory","handlers","onKeyDown","withOverrides","deleteFragment","deleteBackward","disableEditorReset","deleteFragmentPlugin","start","getStartPoint","end","getEndPoint","Point","equals","anchor","focus","resetEditorChildren","insertOptions","select","direction","disableFirstBlockReset","unit","node","getNode","children","props","blockFactory","withoutNormalizing","unsetNodes","Object","keys","getNodeProps","at","setNodes"],"mappings":"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"}