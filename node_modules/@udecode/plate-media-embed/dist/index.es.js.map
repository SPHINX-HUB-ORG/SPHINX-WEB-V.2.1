{"version":3,"file":"index.es.js","sources":["../src/createMediaEmbedPlugin.ts","../src/transforms/insertMediaEmbed.ts"],"sourcesContent":["import { createPluginFactory } from '@udecode/plate-core';\n\nexport const ELEMENT_MEDIA_EMBED = 'media_embed';\n\n/**\n * Enables support for embeddable media such as YouTube\n * or Vimeo videos, Instagram posts and tweets or Google Maps.\n */\nexport const createMediaEmbedPlugin = createPluginFactory({\n  key: ELEMENT_MEDIA_EMBED,\n  isElement: true,\n  isVoid: true,\n  then: (editor, { type }) => ({\n    deserializeHtml: {\n      rules: [\n        {\n          validNodeName: 'IFRAME',\n        },\n      ],\n      getNode: (el: HTMLElement) => {\n        const url = el.getAttribute('src');\n        if (url) {\n          return {\n            type,\n            url,\n          };\n        }\n      },\n    },\n  }),\n});\n","import {\n  getParentNode,\n  insertNodes,\n  PlateEditor,\n  PlatePluginKey,\n  Value,\n} from '@udecode/plate-core';\nimport { ELEMENT_MEDIA_EMBED } from '../createMediaEmbedPlugin';\nimport { TMediaEmbedElement } from '../types';\n\nexport const insertMediaEmbed = <V extends Value>(\n  editor: PlateEditor<V>,\n  {\n    url = '',\n    key = ELEMENT_MEDIA_EMBED,\n  }: Partial<TMediaEmbedElement> & PlatePluginKey\n): void => {\n  if (!editor.selection) return;\n  const selectionParentEntry = getParentNode(editor, editor.selection);\n  if (!selectionParentEntry) return;\n  const [, path] = selectionParentEntry;\n  insertNodes<TMediaEmbedElement>(\n    editor,\n    {\n      type: key,\n      url,\n      children: [{ text: '' }],\n    },\n    { at: path }\n  );\n};\n"],"names":["ELEMENT_MEDIA_EMBED","createMediaEmbedPlugin","createPluginFactory","key","isElement","isVoid","then","editor","type","deserializeHtml","rules","validNodeName","getNode","el","url","getAttribute","insertMediaEmbed","selection","selectionParentEntry","getParentNode","path","insertNodes","children","text","at"],"mappings":";;AAEO,MAAMA,mBAAmB,GAAG,cAA5B;AAEP;AACA;AACA;AACA;;AACaC,MAAAA,sBAAsB,GAAGC,mBAAmB,CAAC;AACxDC,EAAAA,GAAG,EAAEH,mBADmD;AAExDI,EAAAA,SAAS,EAAE,IAF6C;AAGxDC,EAAAA,MAAM,EAAE,IAHgD;EAIxDC,IAAI,EAAE,CAACC,MAAD,EAAS;AAAEC,IAAAA,IAAAA;AAAF,GAAT,MAAuB;AAC3BC,IAAAA,eAAe,EAAE;AACfC,MAAAA,KAAK,EAAE,CACL;AACEC,QAAAA,aAAa,EAAE,QAAA;AADjB,OADK,CADQ;MAMfC,OAAO,EAAGC,EAAD,IAAqB;AAC5B,QAAA,MAAMC,GAAG,GAAGD,EAAE,CAACE,YAAH,CAAgB,KAAhB,CAAZ,CAAA;;AACA,QAAA,IAAID,GAAJ,EAAS;UACP,OAAO;YACLN,IADK;AAELM,YAAAA,GAAAA;WAFF,CAAA;AAID,SAAA;AACF,OAAA;AAdc,KAAA;GADb,CAAA;AAJkD,CAAD;;ACE5CE,MAAAA,gBAAgB,GAAG,CAC9BT,MAD8B,EAE9B;AACEO,EAAAA,GAAG,GAAG,EADR;AAEEX,EAAAA,GAAG,GAAGH,mBAAAA;AAFR,CAF8B,KAMrB;AACT,EAAA,IAAI,CAACO,MAAM,CAACU,SAAZ,EAAuB,OAAA;EACvB,MAAMC,oBAAoB,GAAGC,aAAa,CAACZ,MAAD,EAASA,MAAM,CAACU,SAAhB,CAA1C,CAAA;EACA,IAAI,CAACC,oBAAL,EAA2B,OAAA;EAC3B,MAAM,GAAGE,IAAH,CAAA,GAAWF,oBAAjB,CAAA;EACAG,WAAW,CACTd,MADS,EAET;AACEC,IAAAA,IAAI,EAAEL,GADR;IAEEW,GAFF;AAGEQ,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,IAAI,EAAE,EAAA;KAAT,CAAA;AAHZ,GAFS,EAOT;AAAEC,IAAAA,EAAE,EAAEJ,IAAAA;AAAN,GAPS,CAAX,CAAA;AASD;;;;"}