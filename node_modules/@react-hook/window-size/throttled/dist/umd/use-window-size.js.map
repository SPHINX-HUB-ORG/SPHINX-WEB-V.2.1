{"version":3,"file":"use-window-size.js","sources":["../../../node_modules/@react-hook/throttle/dist/module/index.js","../../../node_modules/@react-hook/latest/dist/module/index.js","../../../node_modules/@react-hook/event/dist/module/index.js","../../src/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport useLatest from '@react-hook/latest';\nconst perf = typeof performance !== 'undefined' ? performance : Date;\n\nconst now = () => perf.now();\n\nexport function useThrottleCallback(callback, fps = 30, leading = false) {\n  const storedCallback = useLatest(callback);\n  const ms = 1000 / fps;\n  const prev = React.useRef(0);\n  const trailingTimeout = React.useRef();\n\n  const clearTrailing = () => trailingTimeout.current && clearTimeout(trailingTimeout.current);\n\n  const deps = [fps, leading, storedCallback]; // Reset any time the deps change\n\n  function _ref() {\n    prev.current = 0;\n    clearTrailing();\n  }\n\n  React.useEffect(() => _ref, deps);\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments;\n    const rightNow = now();\n\n    const call = () => {\n      prev.current = rightNow;\n      clearTrailing();\n      storedCallback.current.apply(null, args);\n    };\n\n    const current = prev.current; // leading\n\n    if (leading && current === 0) return call(); // body\n\n    if (rightNow - current > ms) {\n      if (current > 0) return call();\n      prev.current = rightNow;\n    } // trailing\n\n\n    clearTrailing();\n    trailingTimeout.current = setTimeout(() => {\n      call();\n      prev.current = 0;\n    }, ms);\n  }, deps);\n}\nexport function useThrottle(initialState, fps, leading) {\n  const state = React.useState(initialState);\n  return [state[0], useThrottleCallback(state[1], fps, leading)];\n}","import * as React from 'react';\n\nconst useLatest = current => {\n  const storedValue = React.useRef(current);\n  React.useEffect(() => {\n    storedValue.current = current;\n  });\n  return storedValue;\n};\n\nexport default useLatest;","import * as React from 'react';\n\nfunction useEvent(target, type, listener, cleanup) {\n  const storedListener = React.useRef(listener);\n  const storedCleanup = React.useRef(cleanup);\n  React.useEffect(() => {\n    storedListener.current = listener;\n    storedCleanup.current = cleanup;\n  });\n  React.useEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target;\n    if (!targetEl) return;\n    let didUnsubscribe = 0;\n\n    function listener(...args) {\n      if (didUnsubscribe) return;\n      storedListener.current.apply(this, args);\n    }\n\n    targetEl.addEventListener(type, listener);\n    const cleanup = storedCleanup.current;\n    return () => {\n      didUnsubscribe = 1;\n      targetEl.removeEventListener(type, listener);\n      cleanup && cleanup();\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type]);\n}\n\nexport default useEvent;","/* eslint-disable import/no-extraneous-dependencies */\nimport {useThrottle} from '@react-hook/throttle'\nimport useEvent from '@react-hook/event'\n\nconst emptyObj = {}\n\nexport interface ThrottledWindowSizeOptions {\n  initialWidth?: number\n  initialHeight?: number\n  fps?: number\n  leading?: boolean\n}\n\nconst win = typeof window === 'undefined' ? null : window\nconst wv =\n  win && typeof win.visualViewport !== 'undefined' ? win.visualViewport : null\nconst getSize = () =>\n  [\n    document.documentElement.clientWidth,\n    document.documentElement.clientHeight,\n  ] as const\n\nexport const useWindowSize = (\n  options: ThrottledWindowSizeOptions = emptyObj\n): readonly [number, number] => {\n  const {fps, leading, initialWidth = 0, initialHeight = 0} = options\n  const [size, setThrottledSize] = useThrottle<readonly [number, number]>(\n    /* istanbul ignore next */\n    typeof document === 'undefined' ? [initialWidth, initialHeight] : getSize,\n    fps,\n    leading\n  )\n  const setSize = (): void => setThrottledSize(getSize)\n\n  useEvent(win, 'resize', setSize)\n  // @ts-expect-error\n  useEvent(wv, 'resize', setSize)\n  useEvent(win, 'orientationchange', setSize)\n\n  return size\n}\n\nexport const useWindowHeight = (\n  options?: Omit<ThrottledWindowSizeOptions, 'initialWidth'>\n): number => useWindowSize(options)[1]\n\nexport const useWindowWidth = (\n  options?: Omit<ThrottledWindowSizeOptions, 'initialHeight'>\n): number => useWindowSize(options)[0]\n"],"names":["useThrottleCallback","callback","fps","leading","_ref","prev","current","clearTrailing","storedValue","storedCallback","React","useRef","useEffect","ms","trailingTimeout","clearTimeout","deps","useCallback","args","arguments","rightNow","now","call","apply","setTimeout","useEvent","target","type","listener","cleanup","storedListener","storedCleanup","didUnsubscribe","_len","length","Array","_key","this","targetEl","addEventListener","removeEventListener","perf","performance","Date","emptyObj","win","window","wv","visualViewport","getSize","document","documentElement","clientWidth","clientHeight","useWindowSize","options","_options","_options$initialWidth","initialWidth","_options$initialHeigh","initialHeight","_useThrottle","initialState","state","useState","useThrottle","size","setThrottledSize","setSize"],"mappings":"sjBAMO,SAASA,EAAoBC,EAAUC,EAAUC,GAUtD,SAASC,IACPC,EAAKC,QAAU,EACfC,GACD,MAbsE,IAA3BL,IAAAA,EAAM,SAAqB,IAAjBC,IAAAA,EAAU,GAChE,ICLgBG,EACVE,EDIAC,GCLUH,EDKiBL,ECJ3BO,EAAcE,EAAMC,OAAOL,GACjCI,EAAME,WAAU,WACdJ,EAAYF,QAAUA,KAEjBE,GDCDK,EAAK,IAAOX,EACZG,EAAOK,EAAMC,OAAO,GACpBG,EAAkBJ,EAAMC,SAExBJ,EAAgB,WAAA,OAAMO,EAAgBR,SAAWS,aAAaD,EAAgBR,UAE9EU,EAAO,CAACd,EAAKC,EAASM,GAQ5B,OADAC,EAAME,WAAU,WAAA,OAAMR,CAAtB,GAA4BY,GACrBN,EAAMO,aAAY,WAEvB,IAAMC,EAAOC,UACPC,EAAWC,IAEXC,EAAO,WACXjB,EAAKC,QAAUc,EACfb,IACAE,EAAeH,QAAQiB,MAAM,KAAML,IAG/BZ,EAAUD,EAAKC,QAErB,GAAIH,GAAuB,IAAZG,EAAe,OAAOgB,IAErC,GAAIF,EAAWd,EAAUO,EAAI,CAC3B,GAAIP,EAAU,EAAG,OAAOgB,IACxBjB,EAAKC,QAAUc,CAjBkB,CAqBnCb,IACAO,EAAgBR,QAAUkB,YAAW,WACnCF,IACAjB,EAAKC,QAAU,CAFmB,GAGjCO,EAzBE,GA0BJG,EACJ,CE/CD,SAASS,EAASC,EAAQC,EAAMC,EAAUC,GACxC,IAAMC,EAAiBpB,EAAMC,OAAOiB,GAC9BG,EAAgBrB,EAAMC,OAAOkB,GACnCnB,EAAME,WAAU,WACdkB,EAAexB,QAAUsB,EACzBG,EAAczB,QAAUuB,KAE1BnB,EAAME,WAAU,WAKd,SAASgB,IACP,IAAII,EAAJ,CADyB,IAAA,IAAAC,EAAAd,UAAAe,OAANhB,EAAM,IAAAiB,MAAAF,GAAAG,EAAA,EAAAH,EAAAG,EAAAA,IAANlB,EAAMkB,GAAAjB,UAAAiB,GAEzBN,EAAexB,QAAQiB,MAAMc,KAAMnB,EADf,CAErB,CAPD,IAAMoB,EAAWZ,GAAU,YAAaA,EAASA,EAAOpB,QAAUoB,EAClE,GAAKY,EAAL,CACA,IAAIN,EAAiB,EAOrBM,EAASC,iBAAiBZ,EAAMC,GAChC,IAAMC,EAAUE,EAAczB,QAC9B,OAAO,WACL0B,EAAiB,EACjBM,EAASE,oBAAoBb,EAAMC,GACnCC,GAAWA,GACZ,CAdc,CAehB,GAAE,CAACH,EAAQC,GACb,YFzBKc,EAA8B,oBAAhBC,YAA8BA,YAAcC,KAE1DtB,EAAM,WAAA,OAAMoB,EAAKpB,KAAX,EGANuB,EAAW,CAAA,EASXC,EAAwB,oBAAXC,OAAyB,KAAOA,OAC7CC,EACJF,QAAqC,IAAvBA,EAAIG,eAAiCH,EAAIG,eAAiB,KACpEC,EAAU,WAAA,MACd,CACEC,SAASC,gBAAgBC,YACzBF,SAASC,gBAAgBE,aAHb,EAMHC,EAAgB,SAC3BC,QAC8B,IAD9BA,IAAAA,EAAsCX,GAEtC,IAAAY,EAA4DD,EAArDrD,IAAAA,IAAKC,IAAAA,QAAZsD,EAAAD,EAAqBE,aAAAA,aAAe,EAApCD,EAAAE,EAAAH,EAAuCI,cACvCC,EHwBK,SAAqBC,EAAc5D,EAAKC,GAC7C,IAAM4D,EAAQrD,EAAMsD,SAASF,GAC7B,MAAO,CAACC,EAAM,GAAI/D,EAAoB+D,EAAM,GAAI7D,EAAKC,GACtD,CG3BkC8D,CAEX,oBAAbf,SAA2B,CAACQ,aAHkB,EAAvDC,GAGoEV,EAClE/C,EACAC,GAJK+D,EAAPL,EAAA,GAAaM,EAAbN,EAAA,GAMMO,EAAU,WAAA,OAAYD,EAAiBlB,IAO7C,OALAxB,EAASoB,EAAK,SAAUuB,GAExB3C,EAASsB,EAAI,SAAUqB,GACvB3C,EAASoB,EAAK,oBAAqBuB,GAE5BF,CACR,oBAE8B,SAC7BX,GAD6B,OAElBD,EAAcC,GAAS,EAFL,qCAID,SAC5BA,GAD4B,OAEjBD,EAAcC,GAAS,EAFN"}