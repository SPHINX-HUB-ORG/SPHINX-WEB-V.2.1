(self.webpackChunkaltair_app=self.webpackChunkaltair_app||[]).push([[873],{6873:(O,l,r)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebsocketSubscriptionProvider=void 0;const o=r(71251),C=r(27148),k=r(52999);l.WebsocketSubscriptionProvider=class extends o.SubscriptionProvider{createClient(){var u;this.client=new C.SubscriptionClient(this.subscriptionUrl,{reconnect:!0,connectionParams:this.connectionParams,connectionCallback:null==(u=this.extraOptions)?void 0:u.onConnected})}execute(u){if(this.createClient(),!this.client)throw new Error("Could not create subscription client!");return new k.Observable(c=>this.client.request({query:u.query,variables:u.variables,operationName:u.operationName}).subscribe({next:(...f)=>c.next(...f),error:(...f)=>c.error(...f),complete:()=>c.complete()}))}close(){var u,c;null==(u=this.client)||u.unsubscribeAll(),null==(c=this.client)||c.close(),this.client=void 0}}},26214:O=>{function l(r){this.ms=(r=r||{}).min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}O.exports=l,l.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),C=Math.floor(o*this.jitter*r);r=0==(1&Math.floor(10*o))?r-C:r+C}return 0|Math.min(r,this.max)},l.prototype.reset=function(){this.attempts=0},l.prototype.setMin=function(r){this.ms=r},l.prototype.setMax=function(r){this.max=r},l.prototype.setJitter=function(r){this.jitter=r}},35769:O=>{"use strict";var l=Object.prototype.hasOwnProperty,r="~";function o(){}function C(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function k(u,c,f,d,I){if("function"!=typeof f)throw new TypeError("The listener must be a function");var g=new C(f,d||u,I),y=r?r+c:c;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],g]:u._events[y].push(g):(u._events[y]=g,u._eventsCount++),u}function E(u,c){0==--u._eventsCount?u._events=new o:delete u._events[c]}function _(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),_.prototype.eventNames=function(){var f,d,c=[];if(0===this._eventsCount)return c;for(d in f=this._events)l.call(f,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},_.prototype.listeners=function(c){var d=this._events[r?r+c:c];if(!d)return[];if(d.fn)return[d.fn];for(var I=0,g=d.length,y=new Array(g);I<g;I++)y[I]=d[I].fn;return y},_.prototype.listenerCount=function(c){var d=this._events[r?r+c:c];return d?d.fn?1:d.length:0},_.prototype.emit=function(c,f,d,I,g,y){var S=r?r+c:c;if(!this._events[S])return!1;var b,T,p=this._events[S],M=arguments.length;if(p.fn){switch(p.once&&this.removeListener(c,p.fn,void 0,!0),M){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,f),!0;case 3:return p.fn.call(p.context,f,d),!0;case 4:return p.fn.call(p.context,f,d,I),!0;case 5:return p.fn.call(p.context,f,d,I,g),!0;case 6:return p.fn.call(p.context,f,d,I,g,y),!0}for(T=1,b=new Array(M-1);T<M;T++)b[T-1]=arguments[T];p.fn.apply(p.context,b)}else{var e,a=p.length;for(T=0;T<a;T++)switch(p[T].once&&this.removeListener(c,p[T].fn,void 0,!0),M){case 1:p[T].fn.call(p[T].context);break;case 2:p[T].fn.call(p[T].context,f);break;case 3:p[T].fn.call(p[T].context,f,d);break;case 4:p[T].fn.call(p[T].context,f,d,I);break;default:if(!b)for(e=1,b=new Array(M-1);e<M;e++)b[e-1]=arguments[e];p[T].fn.apply(p[T].context,b)}}return!0},_.prototype.on=function(c,f,d){return k(this,c,f,d,!1)},_.prototype.once=function(c,f,d){return k(this,c,f,d,!0)},_.prototype.removeListener=function(c,f,d,I){var g=r?r+c:c;if(!this._events[g])return this;if(!f)return E(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!I||y.once)&&(!d||y.context===d)&&E(this,g);else{for(var S=0,p=[],M=y.length;S<M;S++)(y[S].fn!==f||I&&!y[S].once||d&&y[S].context!==d)&&p.push(y[S]);p.length?this._events[g]=1===p.length?p[0]:p:E(this,g)}return this},_.prototype.removeAllListeners=function(c){var f;return c?this._events[f=r?r+c:c]&&E(this,f):(this._events=new o,this._eventsCount=0),this},_.prototype.off=_.prototype.removeListener,_.prototype.addListener=_.prototype.on,_.prefixed=r,_.EventEmitter=_,O.exports=_},27148:function(O,l,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(a){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}).apply(this,arguments)},C=this&&this.__awaiter||function(a,e,t,n){return new(t||(t=Promise))(function(i,v){function w(m){try{h(n.next(m))}catch(R){v(R)}}function N(m){try{h(n.throw(m))}catch(R){v(R)}}function h(m){m.done?i(m.value):function(i){return i instanceof t?i:new t(function(v){v(i)})}(m.value).then(w,N)}h((n=n.apply(a,e||[])).next())})},k=this&&this.__generator||function(a,e){var n,s,i,v,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return v={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v;function w(h){return function(m){return function(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(i=2&h[0]?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(6===h[0]&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(a,t)}catch(m){h=[6,m],s=0}finally{n=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,m])}}},E=this&&this.__spreadArrays||function(){for(var a=0,e=0,t=arguments.length;e<t;e++)a+=arguments[e].length;var n=Array(a),s=0;for(e=0;e<t;e++)for(var i=arguments[e],v=0,w=i.length;v<w;v++,s++)n[s]=i[v];return n};Object.defineProperty(l,"__esModule",{value:!0}),l.SubscriptionClient=void 0;var _="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},u=_.WebSocket||_.MozWebSocket,c=r(26214),f=r(35769),d=r(94505),I=r(59185),g=r(71352),y=r(69251),S=r(23850),p=r(2745),M=r(17387),b=r(55906),T=function(){function a(e,t,n,s){var i=t||{},v=i.connectionCallback,w=void 0===v?void 0:v,N=i.connectionParams,h=void 0===N?{}:N,m=i.minTimeout,R=void 0===m?M.MIN_WS_TIMEOUT:m,A=i.timeout,j=void 0===A?M.WS_TIMEOUT:A,P=i.reconnect,U=void 0!==P&&P,L=i.reconnectionAttempts,W=void 0===L?1/0:L,G=i.lazy,B=void 0!==G&&G,x=i.inactivityTimeout,K=void 0===x?0:x,Q=i.wsOptionArguments,D=void 0===Q?[]:Q;if(this.wsImpl=n||u,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=s||p.GRAPHQL_WS,this.connectionCallback=w,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=R,this.wsTimeout=j,this.unsentMessagesQueue=[],this.reconnect=U,this.reconnecting=!1,this.reconnectionAttempts=W,this.lazy=!!B,this.inactivityTimeout=K,this.closedByUser=!1,this.backoff=new c({jitter:.5}),this.eventEmitter=new f.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(h),this.wsOptionArguments=D,this.lazy||this.connect()}return Object.defineProperty(a.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),a.prototype.close=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,b.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())},a.prototype.request=function(e){var t,v,n=this.getObserver.bind(this),s=this.executeOperation.bind(this),i=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),(t={})[S.default]=function(){return this},t.subscribe=function(w,N,h){var m=n(w,N,h);return v=s(e,function(R,A){null===R&&null===A?m.complete&&m.complete():R?m.error&&m.error(R[0]):m.next&&m.next(A)}),{unsubscribe:function(){v&&(i(v),v=null)}}},t},a.prototype.on=function(e,t,n){var s=this.eventEmitter.on(e,t,n);return function(){s.off(e,t,n)}},a.prototype.onConnected=function(e,t){return this.on("connected",e,t)},a.prototype.onConnecting=function(e,t){return this.on("connecting",e,t)},a.prototype.onDisconnected=function(e,t){return this.on("disconnected",e,t)},a.prototype.onReconnected=function(e,t){return this.on("reconnected",e,t)},a.prototype.onReconnecting=function(e,t){return this.on("reconnecting",e,t)},a.prototype.onError=function(e,t){return this.on("error",e,t)},a.prototype.unsubscribeAll=function(){var e=this;Object.keys(this.operations).forEach(function(t){e.unsubscribe(t)})},a.prototype.applyMiddlewares=function(e){var t=this;return new Promise(function(n,s){var v,w,N;v=E(t.middlewares),w=t,(N=function(h){if(h)s(h);else if(v.length>0){var m=v.shift();m&&m.applyMiddleware.apply(w,[e,N])}else n(e)})()})},a.prototype.use=function(e){var t=this;return e.map(function(n){if("function"!=typeof n.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");t.middlewares.push(n)}),this},a.prototype.getConnectionParams=function(e){return function(){return new Promise(function(t,n){if("function"==typeof e)try{return t(e.call(null))}catch(s){return n(s)}t(e)})}},a.prototype.executeOperation=function(e,t){var n=this;null===this.client&&this.connect();var s=this.generateOperationId();return this.operations[s]={options:e,handler:t},this.applyMiddlewares(e).then(function(i){n.checkOperationOptions(i,t),n.operations[s]&&(n.operations[s]={options:i,handler:t},n.sendMessage(s,b.default.GQL_START,i))}).catch(function(i){n.unsubscribe(s),t(n.formatErrors(i))}),s},a.prototype.getObserver=function(e,t,n){return"function"==typeof e?{next:function(s){return e(s)},error:function(s){return t&&t(s)},complete:function(){return n&&n()}}:e},a.prototype.createMaxConnectTimeGenerator=function(){return new c({min:this.minWsTimeout,max:this.wsTimeout,factor:1.2})},a.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},a.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},a.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},a.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},a.prototype.setInactivityTimeout=function(){var e=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout(function(){0===Object.keys(e.operations).length&&e.close()},this.inactivityTimeout))},a.prototype.checkOperationOptions=function(e,t){var n=e.query,s=e.variables,i=e.operationName;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!d.default(n)&&!y.getOperationAST(n,i)||i&&!d.default(i)||s&&!I.default(s))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},a.prototype.buildMessage=function(e,t,n){return{id:e,type:t,payload:n&&n.query?o(o({},n),{query:"string"==typeof n.query?n.query:g.print(n.query)}):n}},a.prototype.formatErrors=function(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]},a.prototype.sendMessage=function(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))},a.prototype.sendMessageRaw=function(e){switch(this.status){case this.wsImpl.OPEN:var t=JSON.stringify(e);try{JSON.parse(t)}catch(n){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+e))}this.client.send(t);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}},a.prototype.generateOperationId=function(){return String(++this.nextOperationId)},a.prototype.tryReconnect=function(){var e=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach(function(n){e.unsentMessagesQueue.push(e.buildMessage(n,b.default.GQL_START,e.operations[n].options))}),this.reconnecting=!0),this.clearTryReconnectTimeout();var t=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout(function(){e.connect()},t)}},a.prototype.flushUnsentMessagesQueue=function(){var e=this;this.unsentMessagesQueue.forEach(function(t){e.sendMessageRaw(t)}),this.unsentMessagesQueue=[]},a.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},a.prototype.checkMaxConnectTimeout=function(){var e=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout(function(){e.status!==e.wsImpl.OPEN&&(e.reconnecting=!0,e.close(!1,!0))},this.maxConnectTimeGenerator.duration())},a.prototype.connect=function(){var e,t=this;this.client=new((e=this.wsImpl).bind.apply(e,E([void 0,this.url,this.wsProtocols],this.wsOptionArguments))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return C(t,void 0,void 0,function(){var n,s;return k(this,function(i){switch(i.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return n=i.sent(),this.sendMessage(void 0,b.default.GQL_CONNECTION_INIT,n),this.flushUnsentMessagesQueue(),[3,4];case 3:return s=i.sent(),this.sendMessage(void 0,b.default.GQL_CONNECTION_ERROR,s),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}})})},this.client.onclose=function(){t.closedByUser||t.close(!1,!1)},this.client.onerror=function(n){t.eventEmitter.emit("error",n)},this.client.onmessage=function(n){t.processReceivedData(n.data)}},a.prototype.processReceivedData=function(e){var t,n;try{n=(t=JSON.parse(e)).id}catch(w){throw new Error("Message must be JSON-parseable. Got: "+e)}if(-1===[b.default.GQL_DATA,b.default.GQL_COMPLETE,b.default.GQL_ERROR].indexOf(t.type)||this.operations[n])switch(t.type){case b.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case b.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case b.default.GQL_COMPLETE:var s=this.operations[n].handler;delete this.operations[n],s.call(this,null,null);break;case b.default.GQL_ERROR:this.operations[n].handler(this.formatErrors(t.payload),null),delete this.operations[n];break;case b.default.GQL_DATA:var i=t.payload.errors?o(o({},t.payload),{errors:this.formatErrors(t.payload.errors)}):t.payload;this.operations[n].handler(null,i);break;case b.default.GQL_CONNECTION_KEEP_ALIVE:var v=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,v&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(n)},a.prototype.unsubscribe=function(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,b.default.GQL_STOP,void 0))},a}();l.SubscriptionClient=T},17387:(O,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WS_TIMEOUT=l.MIN_WS_TIMEOUT=void 0,l.MIN_WS_TIMEOUT=1e3,l.WS_TIMEOUT=3e4},55906:(O,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var r=function(){function o(){throw new Error("Static Class")}return o.GQL_CONNECTION_INIT="connection_init",o.GQL_CONNECTION_ACK="connection_ack",o.GQL_CONNECTION_ERROR="connection_error",o.GQL_CONNECTION_KEEP_ALIVE="ka",o.GQL_CONNECTION_TERMINATE="connection_terminate",o.GQL_START="start",o.GQL_DATA="data",o.GQL_ERROR="error",o.GQL_COMPLETE="complete",o.GQL_STOP="stop",o.SUBSCRIPTION_START="subscription_start",o.SUBSCRIPTION_DATA="subscription_data",o.SUBSCRIPTION_SUCCESS="subscription_success",o.SUBSCRIPTION_FAIL="subscription_fail",o.SUBSCRIPTION_END="subscription_end",o.INIT="init",o.INIT_SUCCESS="init_success",o.INIT_FAIL="init_fail",o.KEEP_ALIVE="keepalive",o}();l.default=r},2745:(O,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.GRAPHQL_SUBSCRIPTIONS=l.GRAPHQL_WS=void 0,l.GRAPHQL_WS="graphql-ws",l.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"},59185:(O,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(o){return null!==o&&"object"==typeof o}},94505:(O,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(o){return"string"==typeof o}},23850:(O,l,r)=>{"use strict";var u,c;r.r(l),r.d(l,{default:()=>E}),O=r.hmd(O);const E=("function"==typeof(c=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:O).Symbol)?c.observable?u=c.observable:(u=c("observable"),c.observable=u):u="@@observable",u)}}]);