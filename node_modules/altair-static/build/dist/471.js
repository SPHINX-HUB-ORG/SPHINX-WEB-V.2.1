"use strict";(self.webpackChunkaltair_app=self.webpackChunkaltair_app||[]).push([[471],{95471:(F,y,g)=>{g.r(y),g.d(y,{DocUtils:()=>A});var D=g(67729),E=g(70708),b=g(51316);class A{constructor(e){this.searchIndex=[],e&&this.updateSchema(e)}updateSchema(e){this.schema=(0,E.I)(e)}generateSearchIndex(){if(!this.schema)return[];let e=[];(0,b.Z)(this.schema).forEach(t=>{e=[...e,...this.getTypeIndices(t,!0,e)]});const a=this.schema.getTypeMap();return Object.keys(a).forEach(t=>{/^__/.test(t)||(e=[...e,...this.getTypeIndices(a[t],!1,e)])}),this.searchIndex=e,e}getFieldsIndices(e,i,a,t){let s=[];return Object.keys(e).forEach(n=>{const r=e[n],c={search:r.name,name:r.name,description:r.description?r.description:"",args:r.args?r.args.map(h=>({name:h.name,description:h.description})):[],cat:"field",type:i.name,isQuery:a,highlight:"field"};s=[...s,c],r.args&&r.args.length&&r.args.forEach(h=>{s=[...s,{...c,search:h.name,highlight:"argument"}]}),r.type&&(s=[...s,...this.getTypeIndices(r.type,!1,[...t,...s]).filter(h=>!!h)])}),s}getTypeIndices(e,i,a){let t=null;if(!e.name)return[];if(a.some(n=>n.name===e.name&&"type"===n.cat))return[];e.getFields&&(t=e.getFields());const s=[{search:e.name,name:e.name,cat:"type",description:e.description?e.description:"",isRoot:i,highlight:"type"}];return t?[...s,...this.getFieldsIndices(t,e,i,[...a,...s]).filter(n=>!!n)]:s}searchDocs(e){return this.searchIndex.length?new D.Z(this.searchIndex,{keys:["search"],threshold:.4}).search(e).map(a=>a.item):[]}generateQuery(e,i,a){let t="",s=!1;if(!this.schema)return;switch(i){case this.schema.getQueryType()&&this.schema.getQueryType().name:t+="query";break;case this.schema.getMutationType()&&this.schema.getMutationType().name:t+="mutation";break;case this.schema.getSubscriptionType()&&this.schema.getSubscriptionType().name:t+="subscription";break;default:t+=`fragment _____ on ${i}`,s=!0}const n=this.generateFieldData(e,i,[],1,a);if(!n)return;t+=`{\n${n.query}\n}`;const r={...n.meta};return r.hasArgs=s||r.hasArgs,{query:t,meta:r}}cleanName(e){return e.replace(/[\[\]!]/g,"")}generateFieldData(e,i,a,t,s={}){if(!(e&&i&&a&&this.schema))return{query:"",meta:{}};const n=s.tabSize||2,r=this.schema.getType(i),c=r&&r.getFields()[e];if(!c)return{query:"",meta:{}};const h={hasArgs:!1};let d=" ".repeat(t*n)+c.name;c.args&&c.args.length&&(h.hasArgs=!0,d+=`(${c.args.reduce((f,l)=>f+", "+l.name+": ______","").substring(2)})`);const m=this.cleanName(c.type.inspect()),o=this.schema.getType(m);if(a.filter(u=>u.type===m).length)return{query:"",meta:{}};if(t>=(s.addQueryDepthLimit||0))return{query:"",meta:{}};const _=o&&o.getFields&&o.getFields();let p="";return _&&(p=Object.keys(_).reduce((u,f)=>{if(a.filter(I=>I.name===f&&I.type===m).length)return"";const l=this.generateFieldData(f,m,[...a,{name:e,type:m}],t+1,s);if(!l)return u;const T=l.query;return h.hasArgs=h.hasArgs||l.meta.hasArgs||!1,T?u+"\n"+T:u},"").substring(1)),p&&(d+=`{\n${p}\n`,d+=" ".repeat(t*n)+"}"),{query:d,meta:h}}}}}]);