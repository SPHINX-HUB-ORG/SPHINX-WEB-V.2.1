"use strict";(self.webpackChunkaltair=self.webpackChunkaltair||[]).push([[471],{95471:(F,y,u)=>{u.r(y),u.d(y,{DocUtils:()=>O});var I=u(15861),E=u(50855),b=u(32833),A=u(51316),M=u(62762);class O{constructor(e){this.searchIndex=[],e&&this.updateSchema(e)}updateSchema(e){this.schema=(0,b.I)(e)}generateSearchIndex(){if(!this.schema)return[];let e=[];(0,A.Z)(this.schema).forEach(t=>{e=[...e,...this.getTypeIndices(t,!0,e)]});const r=this.schema.getTypeMap();return Object.keys(r).forEach(t=>{/^__/.test(t)||(e=[...e,...this.getTypeIndices(r[t],!1,e)])}),this.searchIndex=e,e}getFieldsIndices(e,i,r,t){let s=[];return Object.keys(e).forEach(n=>{const a=e[n],c={search:a.name,name:a.name,description:a.description?a.description:"",args:a.args?a.args.map(h=>({name:h.name,description:h.description})):[],cat:"field",type:i.name,isQuery:r,highlight:"field"};s=[...s,c],a.args&&a.args.length&&a.args.forEach(h=>{s=[...s,{...c,search:h.name,highlight:"argument"}]}),a.type&&(s=[...s,...this.getTypeIndices(a.type,!1,[...t,...s]).filter(h=>!!h)])}),s}getTypeIndices(e,i,r){let t=null;if(!e.name)return[];if(r.some(n=>n.name===e.name&&"type"===n.cat))return[];e.getFields&&(t=e.getFields());const s=[{search:e.name,name:e.name,cat:"type",description:e.description?e.description:"",isRoot:i,highlight:"type"}];return t?[...s,...this.getFieldsIndices(t,e,i,[...r,...s]).filter(n=>!!n)]:s}searchDocs(e){return this.searchIndex.length?new E.Z(this.searchIndex,{keys:["search"],threshold:.4}).search(e).map(r=>r.item):[]}generateQuery(e,i,r){let t="",s=!1;if(!this.schema)return;switch(i){case this.schema.getQueryType()&&this.schema.getQueryType().name:t+="query";break;case this.schema.getMutationType()&&this.schema.getMutationType().name:t+="mutation";break;case this.schema.getSubscriptionType()&&this.schema.getSubscriptionType().name:t+="subscription";break;default:t+=`fragment _____ on ${i}`,s=!0}const n=this.generateFieldData(e,i,[],1,r);if(!n)return;t+=`{\n${n.query}\n}`;const a={...n.meta};return a.hasArgs=s||a.hasArgs,{query:t,meta:a}}generateQueryV2(e,i,r){var t=this;return(0,I.Z)(function*(){if(!t.schema)return;const s=yield(0,M.Ku)(t.schema,e,i,{maxDepth:r.addQueryDepthLimit,tabSize:r.tabSize});return{query:s.generated,meta:s.metas.find(n=>n.hasArgs)||{}}})()}cleanName(e){return e.replace(/[\[\]!]/g,"")}generateFieldData(e,i,r,t,s={}){if(!(e&&i&&r&&this.schema))return{query:"",meta:{}};const n=s.tabSize||2,a=this.schema.getType(i),c=a&&a.getFields()[e];if(!c)return{query:"",meta:{}};const h={hasArgs:!1};let d=" ".repeat(t*n)+c.name;c.args&&c.args.length&&(h.hasArgs=!0,d+=`(${c.args.reduce((o,l)=>o+", "+l.name+": ______","").substring(2)})`);const m=this.cleanName(c.type.inspect()),f=this.schema.getType(m);if(r.filter(g=>g.type===m).length)return{query:"",meta:{}};if(t>=(s.addQueryDepthLimit||0))return{query:"",meta:{}};const p=f&&f.getFields&&f.getFields();let _="";return p&&(_=Object.keys(p).reduce((g,o)=>{if(r.filter(T=>T.name===o&&T.type===m).length)return"";const l=this.generateFieldData(o,m,[...r,{name:e,type:m}],t+1,s);if(!l)return g;const D=l.query;return h.hasArgs=h.hasArgs||l.meta.hasArgs||!1,D?g+"\n"+D:g},"").substring(1)),_&&(d+=`{\n${_}\n`,d+=" ".repeat(t*n)+"}"),{query:d,meta:h}}}}}]);