!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["final-form-arrays"]={})}(this,function(e){"use strict";function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function h(e,n,r,t){r[t]=i({},e[n],{name:t,change:e[t]&&e[t].change,blur:e[t]&&e[t].blur,focus:e[t]&&e[t].focus,lastFieldState:void 0}),r[t].change||delete r[t].change,r[t].blur||delete r[t].blur,r[t].focus||delete r[t].focus}function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e,i,n){var a=e[0],f=e[1],r=e[2];(0,n.changeValue)(i,a,function(e){var n=[].concat(e||[]);return n.splice(f,0,r),n});var c=new RegExp("^"+g(a)+"\\[(\\d+)\\](.*)"),u={};Object.keys(i.fields).forEach(function(e){var n=c.exec(e);if(n){var r=Number(n[1]);if(f<=r){var t=a+"["+(r+1)+"]"+n[2];return void h(i.fields,e,u,t)}}u[e]=i.fields[e]}),i.fields=u}function f(e,f,n){var r,c=e[0],u=e[1],t=n.changeValue,o=n.getIn,l=n.setIn;t(f,c,function(e){if(!e)return e;var n=[].concat(e);return r=n[u],n.splice(u,1),0<n.length?n:void 0});var s=new RegExp("^"+g(c)+"\\[(\\d+)\\](.*)"),v={};return Object.keys(f.fields).forEach(function(e){var n=s.exec(e);if(n){var r=Number(n[1]);if(r===u){if(e===c+"["+u+"]"){var t="formState.submitErrors."+c,i=o(f,t);Array.isArray(i)&&(i.splice(u,1),f=l(f,t,i))}return}if(u<r){var a=c+"["+(r-1)+"]"+n[2];return void h(f.fields,e,v,a)}}v[e]=f.fields[e]}),f.fields=v,r}var n={insert:a,concat:function(e,n,r){var t=e[0],i=e[1];(0,r.changeValue)(n,t,function(e){return e?[].concat(e,i):i})},move:function(e,a,n){var f=e[0],c=e[1],u=e[2],r=n.changeValue;if(c!==u){r(a,f,function(e){var n=[].concat(e||[]),r=n[c];return n.splice(c,1),n.splice(u,0,r),n});var o,l,s,v={},d=new RegExp("^"+g(f)+"\\[(\\d+)\\](.*)");s=u<c?(o=u,l=c,1):(o=c,l=u,-1),Object.keys(a.fields).forEach(function(e){var n=d.exec(e);if(n){var r=Number(n[1]);if(r===c){var t=f+"["+u+"]"+n[2];return void h(a.fields,e,v,t)}if(o<=r&&r<=l){var i=f+"["+(r+s)+"]"+n[2];return void h(a.fields,e,v,i)}}v[e]=a.fields[e]}),a.fields=v}},pop:function(e,n,r){var t=e[0],i=(0,r.getIn)(n.formState.values,t);return i&&0<i.length?f([t,i.length-1],n,r):void 0},push:function(e,n,r){var t=e[0],i=e[1];(0,r.changeValue)(n,t,function(e){return e?[].concat(e,[i]):[i]})},remove:f,removeBatch:function(e,a,n){var f=e[0],i=e[1],r=n.changeValue;if(0===i.length)return[];var c=[].concat(i);c.sort();for(var t=c.length-1;0<t;t-=1)c[t]===c[t-1]&&c.splice(t,1);var u=[];r(a,f,function(n){if(u=i.map(function(e){return n&&n[e]}),!n)return n;for(var e=[].concat(n),r=c.length-1;0<=r;r-=1){var t=c[r];e.splice(t,1)}return 0<e.length?e:void 0});var o=new RegExp("^"+g(f)+"\\[(\\d+)\\](.*)"),l={};return Object.keys(a.fields).forEach(function(e){var n=o.exec(e);if(n){var r=Number(n[1]),t=function(e,n){for(var r=0,t=e.length-1,i=0;r<=t;){if(e[i=Math.floor((r+t)/2)]===n)return i;e[i]>n?t=i-1:r=i+1}return~r}(c,r);if(0<=t)return;if(r>c[0]){var i=f+"["+(r-~t)+"]"+n[2];return void h(a.fields,e,l,i)}}l[e]=a.fields[e]}),a.fields=l,u},shift:function(e,n,r){var t=e[0];return f([t,0],n,r)},swap:function(e,a,n){var r=e[0],t=e[1],i=e[2],f=n.changeValue;if(t!==i){f(a,r,function(e){var n=[].concat(e||[]),r=n[t];return n[t]=n[i],n[i]=r,n});var c=r+"["+t+"]",u=r+"["+i+"]",o={};Object.keys(a.fields).forEach(function(e){if(e.substring(0,c.length)===c){var n=e.substring(c.length),r=u+n;h(a.fields,e,o,r)}else if(e.substring(0,u.length)===u){var t=e.substring(u.length),i=c+t;h(a.fields,e,o,i)}else o[e]=a.fields[e]}),a.fields=o}},unshift:function(e,n,r){var t=e[0],i=e[1];return a([t,0,i],n,r)},update:function(e,n,r){var t=e[0],i=e[1],a=e[2];(0,r.changeValue)(n,t,function(e){var n=[].concat(e||[]);return n.splice(i,1,a),n})}};e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
