'use strict'

exports.__esModule = true
exports.renderPortalsToString = renderPortalsToString

var _server = /*#__PURE__*/ require('react-dom/server')

var _cheerio = /*#__PURE__*/ require('cheerio')

var _reactPortalize = /*#__PURE__*/ require('react-portalize')

function renderPortalsToString(html) {
  const selectors = Object.keys(_reactPortalize.PORTALS)
  if (selectors.length === 0) return html
  const doc = (0, _cheerio.load)(html)

  for (let i = 0; i < selectors.length; i++) {
    const selector = selectors[i]
    doc(selector).html(
      (0, _server.renderToStaticMarkup)(_reactPortalize.PORTALS[selector])
    )
  }

  return String(
    html.match(/^\s*(<!|<html|<body|<head)/)
      ? doc.html()
      : doc('body').contents()
  )
}
